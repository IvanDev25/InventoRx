<div class="dashboard-container">
  <div class="loading" *ngIf="loading">
    <p>Loading medicine suppliers...</p>
  </div>

  <div class="dashboard-content" *ngIf="!loading">
    <!-- Global Search Bar -->


    <div class="global-search-container">
      <div class="search-results-info" *ngIf="searchTerm">
        <span class="highlight">{{ getTotalFilteredMedicines() }}</span> medicines found
        <span *ngIf="filteredMedicineSuppliers.length > 0"> across <span class="highlight">{{ filteredMedicineSuppliers.length }}</span> consignor(s)</span>
      </div>
      
      <div class="supplier-search-bar">
        <i class="search-icon"><svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M20 20.0002L15.657 15.6572M15.657 15.6572C16.3998 14.9143 16.9891 14.0324 17.3912 13.0618C17.7932 12.0911 18.0002 11.0508 18.0002 10.0002C18.0002 8.9496 17.7932 7.90929 17.3912 6.93866C16.9891 5.96803 16.3998 5.08609 15.657 4.34321C14.9141 3.60032 14.0321 3.01103 13.0615 2.60898C12.0909 2.20693 11.0506 2 9.99996 2C8.94936 2 7.90905 2.20693 6.93842 2.60898C5.96779 3.01103 5.08585 3.60032 4.34296 4.34321C2.84263 5.84354 1.99976 7.87842 1.99976 10.0002C1.99976 12.122 2.84263 14.1569 4.34296 15.6572C5.84329 17.1575 7.87818 18.0004 9.99996 18.0004C12.1217 18.0004 14.1566 17.1575 15.657 15.6572Z" stroke="#989898" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></i>
        <input type="text" placeholder="Search medicines..." class="search-input" 
               [(ngModel)]="searchTerm" (ngModelChange)="onSearchChange($event)">
      </div>
      

    </div>

    <div class="supplier-section" *ngFor="let supplier of filteredMedicineSuppliers">
      <div class="supplier-header">
        <h2 class="supplier-title">{{ supplier.supplierName }}</h2>
      </div>
      
      <div class="medicines-grid">
        <div class="medicine-card" *ngFor="let medicine of supplier.medicines">
          <div class="card-header">
            <div class="medicine-quantity">{{ medicine.stock }}</div>
            <div class="status-badge" [ngClass]="getStatusClass(medicine)">
              {{ getStatusText(medicine) }}
            </div>
          </div>
          
          <div class="medicine-name">{{ medicine.genericName }}</div>
          
          <div class="medicine-details">
            <div class="detail-row">
              <span class="label">Expiration Date:</span>
              <span class="value">{{ formatDate(medicine.expirationDate) }}</span>
            </div>
            <div class="detail-row">
              <span class="label">Price:</span>
              <span class="value">P {{ medicine.price }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="no-data" *ngIf="filteredMedicineSuppliers.length === 0 && !loading">
      <p *ngIf="searchTerm">No medicines found matching "<span class="search-term">{{ searchTerm }}</span>"</p>
      <p *ngIf="!searchTerm">No medicine suppliers found.</p>
    </div>
  </div>
</div>
